var C=Object.defineProperty;var b=(s,e,t)=>e in s?C(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var l=(s,e,t)=>b(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();class A{constructor(e=3600){l(this,"interval",null);l(this,"deactivated",!1);l(this,"handlers",{start:[],tick:[],stop:[],expire:[]});this.timeRemaining=e,this.addEventListener("start",()=>console.log("start")),this.addEventListener("tick",console.log),this.addEventListener("stop",()=>console.log("stop")),this.addEventListener("expire",()=>console.log("expire")),setTimeout(()=>this.emitEvent("tick"))}start(){this.interval||this.deactivated||(this.emitEvent("start"),this.interval=setInterval(()=>{this.timeRemaining-=1,this.emitEvent("tick"),this.timeRemaining===0&&(this.emitEvent("expire"),this.stop())},1e3))}stop(){this.interval&&clearInterval(this.interval),!this.deactivated&&(this.interval=null,this.emitEvent("stop"))}deactivate(){this.deactivated=!0,this.stop()}addEventListener(e,t){this.handlers[e].push(t)}emitEvent(e){e==="tick"?this.handlers.tick.forEach(t=>t(this.timeRemaining)):this.handlers[e].forEach(t=>t())}}class N{constructor(e="EXPERIMENT"){l(this,"handlers",{success:[],failure:[]});this.solution=e,this.addEventListener("success",()=>console.log("success")),this.addEventListener("failure",()=>console.log("failure"))}check(e){e.toLocaleLowerCase()===this.solution.toLowerCase()?this.emitEvent("success"):this.emitEvent("failure")}addEventListener(e,t){this.handlers[e].push(t)}emitEvent(e){this.handlers[e].forEach(t=>t())}}const c=new A,h=new N,[u]=document.getElementsByTagName("body"),v=document.getElementById("status"),f=document.getElementById("clock"),d=document.getElementById("prompt"),x=document.getElementById("alarm_audio"),O=document.getElementById("success_audio"),r=document.getElementById("secret_input"),g=document.querySelectorAll(".letter"),w=document.getElementById("letters"),L=s=>{if(s.key==="Enter"){const e=r.value;h.check(e),r.focus()}},T=async s=>{u.style.backgroundColor="#A00",await a("SELF-DESTRUCT MODE ACTIVATED",v),await y(100),p(f),p(w),c.start(),window.addEventListener("keydown",L),window.removeEventListener("keydown",T),r.focus()};window.addEventListener("keydown",T);h.addEventListener("failure",async()=>{r.value="",await a("INCORRECT DEACTIVATION KEY",d),await y(1500),await a("Enter deactivation key",d)});h.addEventListener("success",async()=>{c.deactivate(),r.removeEventListener("keyup",I),window.removeEventListener("keydown",L),u.style.backgroundColor="green",await a("DEACTIVATION KEY ACCEPTED",d),await a("Self-destruct mode DEACTIVATED",v),k(["green","blue","yellow","orange"],500),O.play()});c.addEventListener("start",async()=>{await a("Enter deactivation key",d)});c.addEventListener("tick",s=>{f.innerText=B(s)});c.addEventListener("expire",async()=>{g.forEach(E),E(d),await a("INITIATING SELF-DESTRUCT SEQUENCE",v),k(["red","black"],610),x.play()});const I=()=>{const s=r.value.toUpperCase().split("");g.forEach((e,t)=>{e.innerHTML=s[t]||"&nbsp;"})};r.addEventListener("keyup",I);function B(s){const e=n=>n<10?`0${n}`:`${n}`,t=e(Math.floor(s/60)),o=e(s%60);return`${t}:${o}`}window.timer=c;async function a(s,e){const t=s.split("");for(let o=0;o<t.length;o++){await y(50);const n=t.slice(0,o+1).join(""),i="*".repeat(t.length-o-1);e.innerText=n+i}}const y=s=>new Promise(e=>setTimeout(e,s)),E=s=>s.style.visibility="hidden",p=s=>s.style.visibility="inherit";function k(s,e=500){const t=[...s];u.style.backgroundColor=t[0];const o=setInterval(()=>{t.push(t.shift()),u.style.backgroundColor=t[0]},e);return()=>clearInterval(o)}E(f);E(w);
