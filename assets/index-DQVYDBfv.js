var L=Object.defineProperty;var T=(t,e,n)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var l=(t,e,n)=>T(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class k{constructor(e=3600){l(this,"interval",null);l(this,"deactivated",!1);l(this,"handlers",{start:[],tick:[],stop:[],expire:[]});this.timeRemaining=e,this.addEventListener("start",()=>console.log("start")),this.addEventListener("tick",console.log),this.addEventListener("stop",()=>console.log("stop")),this.addEventListener("expire",()=>console.log("expire")),setTimeout(()=>this.emitEvent("tick"))}start(){this.interval||this.deactivated||(this.emitEvent("start"),this.interval=setInterval(()=>{this.timeRemaining-=1,this.emitEvent("tick"),this.timeRemaining===0&&(this.emitEvent("expire"),this.stop())},1e3))}stop(){this.interval&&clearInterval(this.interval),!this.deactivated&&(this.interval=null,this.emitEvent("stop"))}deactivate(){this.deactivated=!0,this.stop()}addEventListener(e,n){this.handlers[e].push(n)}emitEvent(e){e==="tick"?this.handlers.tick.forEach(n=>n(this.timeRemaining)):this.handlers[e].forEach(n=>n())}}class I{constructor(e="EXPERIMENT"){l(this,"handlers",{success:[],failure:[]});this.solution=e,this.addEventListener("success",()=>console.log("success")),this.addEventListener("failure",()=>console.log("failure"))}check(e){e.toLocaleLowerCase()===this.solution.toLowerCase()?this.emitEvent("success"):this.emitEvent("failure")}addEventListener(e,n){this.handlers[e].push(n)}emitEvent(e){this.handlers[e].forEach(n=>n())}}const c=new k,h=new I,m=document.getElementById("status"),C=document.getElementById("clock"),d=document.getElementById("prompt"),o=document.getElementById("secret_input"),p=document.querySelectorAll(".letter"),y=t=>{if(t.key==="Enter"){const e=o.value;h.check(e),o.focus()}},g=t=>{c.start(),window.addEventListener("keydown",y),window.removeEventListener("keydown",g),o.focus()};window.addEventListener("keydown",g);h.addEventListener("failure",async()=>{o.value="",await a("INCORRECT DEACTIVATION KEY",d),await v(1500),await a("Enter deactivation key",d)});h.addEventListener("success",async()=>{c.deactivate(),o.removeEventListener("keyup",w),window.removeEventListener("keydown",y),E(["green"]),await a("DEACTIVATION KEY ACCEPTED",d),await a("Self-destruct mode DEACTIVATED",m),await v(250),E(["green","blue","yellow","orange"],100)});c.addEventListener("start",async()=>{await a("SELF-DESTRUCT MODE ACTIVATED",m),await a("Enter deactivation key",d)});c.addEventListener("tick",t=>{C.innerText=b(t)});c.addEventListener("expire",async()=>{p.forEach(f),f(d),await a("INITIATING SELF-DESTRUCT SEQUENCE",m),E(["red","black"])});const w=()=>{const t=o.value.toUpperCase().split("");p.forEach((e,n)=>{e.innerHTML=t[n]||"&nbsp;"})};o.addEventListener("keyup",w);function b(t){const e=s=>s<10?`0${s}`:`${s}`,n=e(Math.floor(t/60)),r=e(t%60);return`${n}:${r}`}window.timer=c;async function a(t,e){const n=t.split("");for(let r=0;r<n.length;r++){await v(50);const s=n.slice(0,r+1).join(""),i="*".repeat(n.length-r-1);e.innerText=s+i}}const v=t=>new Promise(e=>setTimeout(e,t)),f=t=>t.style.visibility="hidden";function E(t,e=500){const[n]=document.getElementsByTagName("body");n.style.backgroundColor=t[0];const r=setInterval(()=>{t.push(t.shift()),n.style.backgroundColor=t[0]},e);return()=>clearInterval(r)}
