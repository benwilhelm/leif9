var k=Object.defineProperty;var A=(s,e,t)=>e in s?k(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var d=(s,e,t)=>A(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const v of o.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&i(v)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();class I{constructor(e=3600){d(this,"interval",null);d(this,"deactivated",!1);d(this,"handlers",{start:[],tick:[],stop:[],expire:[]});this.timeRemaining=e,this.addEventListener("start",()=>console.log("start")),this.addEventListener("tick",console.log),this.addEventListener("stop",()=>console.log("stop")),this.addEventListener("expire",()=>console.log("expire")),setTimeout(()=>this.emitEvent("tick"))}start(){this.interval||this.deactivated||(this.emitEvent("start"),this.interval=setInterval(()=>{this.timeRemaining-=1,this.emitEvent("tick"),this.timeRemaining===0&&(this.emitEvent("expire"),this.stop())},1e3))}stop(){this.interval&&clearInterval(this.interval),!this.deactivated&&(this.interval=null,this.emitEvent("stop"))}deactivate(){this.deactivated=!0,this.stop()}addEventListener(e,t){this.handlers[e].push(t)}emitEvent(e){e==="tick"?this.handlers.tick.forEach(t=>t(this.timeRemaining)):this.handlers[e].forEach(t=>t())}}class b{constructor(e="EXPERIMENT"){d(this,"handlers",{success:[],failure:[]});this.solution=e,this.addEventListener("success",()=>console.log("success")),this.addEventListener("failure",()=>console.log("failure"))}check(e){e.toLocaleLowerCase()===this.solution.toLowerCase()?this.emitEvent("success"):this.emitEvent("failure")}addEventListener(e,t){this.handlers[e].push(t)}emitEvent(e){this.handlers[e].forEach(t=>t())}}const S=new URLSearchParams(document.location.search),f=S.get("t");console.log(f);const x=f?+f:3600,l=new I(x),y=new b,[E]=document.getElementsByTagName("body"),m=document.getElementById("status"),g=document.getElementById("clock"),a=document.getElementById("prompt"),O=document.getElementById("alarm_audio"),P=document.getElementById("success_audio"),c=document.getElementById("secret_input"),R=document.querySelectorAll(".letter"),B=document.getElementById("letters"),u={enterAccessCode:"Enter Access Code",incorrectAccessCode:"INCORRECT ACCESS CODE",accessCodeAccepted:"ACCESS CODE ACCEPTED"},w=s=>{if(s.key==="Enter"){const e=c.value;y.check(e),c.focus()}},L=async s=>{E.style.backgroundColor="#A00",await r("SELF-DESTRUCT MODE ACTIVATED",m),await h(100),N(g),l.start(),window.addEventListener("keydown",w),window.removeEventListener("keydown",L),c.focus()};window.addEventListener("keydown",L);y.addEventListener("failure",async()=>{c.value="",await r(u.incorrectAccessCode,a),await h(1500),await r(u.enterAccessCode,a)});y.addEventListener("success",async()=>{l.deactivate(),c.removeEventListener("keyup",C),window.removeEventListener("keydown",w),E.style.backgroundColor="green",await r(u.accessCodeAccepted,a),await r("Self-destruct mode DEACTIVATED",m),await h(1e3),await r("Stabilizing Underpantsium Stores",m),T(["green","blue","yellow","orange"],500),P.play()});l.addEventListener("start",async()=>{await r(u.enterAccessCode,a)});l.addEventListener("tick",s=>{g.innerText=D(s)});l.addEventListener("expire",async()=>{p(B),p(a),T(["red","black"],610),O.play(),await r("INITIATING SELF-DESTRUCT SEQUENCE",m)});const C=()=>{const s=c.value.toUpperCase().split("");R.forEach((e,t)=>{var i;e.innerHTML=((i=s[t])==null?void 0:i.trim())||"&nbsp;"})};c.addEventListener("keyup",C);function D(s){const e=n=>n<10?`0${n}`:`${n}`,t=e(Math.floor(s/60)),i=e(s%60);return`${t}:${i}`}window.timer=l;async function r(s,e){const t=s.split("");for(let i=0;i<t.length;i++){await h(50);const n=t.slice(0,i+1).join(""),o="*".repeat(t.length-i-1);e.innerText=n+o}}const h=s=>new Promise(e=>setTimeout(e,s)),p=s=>s.style.visibility="hidden",N=s=>s.style.visibility="inherit";function T(s,e=500){const t=[...s];E.style.backgroundColor=t[0];const i=setInterval(()=>{t.push(t.shift()),E.style.backgroundColor=t[0]},e);return()=>clearInterval(i)}p(g);a.innerHTML=u.enterAccessCode;
